<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>ğŸ° BelekÂ´s Slot-Maschine</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
html,body{margin:0;height:100%;background:#111;color:white;font-family:Arial}
#layout{display:flex;height:100vh}

/* LEFT */
#app{width:55%;display:flex;justify-content:center;align-items:center}
#gameCard{
 background:linear-gradient(#111,#000);
 border:3px solid gold;border-radius:20px;
 padding:28px;box-shadow:0 0 30px rgba(255,215,0,.3);
 display:flex;flex-direction:column;align-items:center;gap:14px
}
h1{color:gold;font-size:2.4rem;text-shadow:0 0 10px gold}
.status{color:cyan}
.jackpot{color:gold;font-size:1.8rem}

.reels{display:flex;gap:25px;margin:15px}
.reel{
 width:95px;font-size:4.5rem;background:#000;
 padding:18px;border:5px ridge gold;text-align:center
}

.controls{display:flex;gap:10px}
.controls button{
 padding:12px 18px;font-size:1rem;
 border:none;border-radius:10px;cursor:pointer
}
.spin{background:green;color:white}
.allin{background:red;color:white}

.player-info{color:cyan;font-size:1.2rem}

/* RIGHT */
#right{width:45%;background:black;border-left:4px solid gold;
 padding:12px;display:flex;flex-direction:column;gap:12px}
.panel{
 background:linear-gradient(#111,#000);
 border:2px solid gold;border-radius:12px;
 padding:10px;overflow:hidden
}
.panel h3{text-align:center;color:gold}

/* Leaderboard */
#leaderboardList{min-height:420px;max-height:420px;overflow-y:auto}
#leaderboardList div{
 display:flex;justify-content:space-between;
 padding:6px;border-bottom:1px solid #333
}

/* Gewinnlog */
#winLog{min-height:280px;max-height:280px;overflow-y:auto}
.log-win{color:#00ff7f}
.log-lose{color:#ff4c4c}
.log-jackpot{color:gold}

/* Paytable */
#paytable table{width:100%;border-collapse:collapse}
#paytable th,#paytable td{text-align:center;padding:6px}
#paytable tr:not(:last-child) td{border-bottom:1px solid rgba(255,215,0,.3)}
</style>
</head>

<body>
<div id="layout">

<div id="app">
<div id="gameCard">
<h1>ğŸ° BelekÂ´s Slot-Maschine</h1>
<div id="status" class="status"></div>
<div id="jackpot" class="jackpot"></div>
<div id="timer" class="status"></div>

<div class="reels">
 <div class="reel" id="r1">â”</div>
 <div class="reel" id="r2">â”</div>
 <div class="reel" id="r3">â”</div>
</div>

<div class="controls">
 <button onclick="setBet()">ğŸ¯ Einsatz</button>
 <button class="allin" onclick="allIn()">ğŸ’¥ ALL IN</button>
 <button class="spin" onclick="spin()">â–¶ SPIN</button>
</div>

<div id="playerInfo" class="player-info"></div>
</div>
</div>

<div id="right">
<div class="panel"><h3>ğŸ† Leaderboard</h3><div id="leaderboardList"></div></div>
<div class="panel"><h3>ğŸ§¾ Gewinne</h3><div id="winLog"></div></div>

<div class="panel" id="paytable">
<h3>ğŸ“Š Paytable</h3>
<table>
<tr><th>Kombi</th><th>x</th></tr>
<tr><td>ğŸ’ğŸ’ğŸ’</td><td>10</td></tr>
<tr><td>ğŸ‹ğŸ‹ğŸ‹</td><td>30</td></tr>
<tr><td>ğŸŠğŸŠğŸŠ</td><td>50</td></tr>
<tr><td>ğŸ””ğŸ””ğŸ””</td><td>75</td></tr>
<tr><td>â­â­â­</td><td>100</td></tr>
<tr><td>7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£</td><td>150</td></tr>
<tr><td>ğŸ’ğŸ’ğŸ’</td><td>JACKPOT</td></tr>
</table>
</div>
</div>
</div>

<!-- MOD MENU -->
<div id="modMenu" style="display:none;position:fixed;bottom:20px;left:20px;
background:black;border:2px solid red;border-radius:12px;padding:12px">
<h3 style="color:red;text-align:center">ğŸ›  MOD MENU</h3>
<input id="modJackpot" type="number" placeholder="Jackpot â‚¬"><br><br>
<button onclick="modSetJackpot()">Jackpot setzen</button><br><br>
<input id="modPlayer" placeholder="Spielername"><br>
<input id="modAmount" type="number" placeholder="â‚¬ Betrag"><br>
<button onclick="modMoney()">Geld Ã¤ndern</button><br><br>
<button onclick="modResetPlayers()">Alle Spieler lÃ¶schen</button>
</div>

<button onclick="openModMenu()" style="position:fixed;bottom:10px;right:10px;
opacity:.15;background:black;color:red;border-radius:50%;width:40px;height:40px">âš™ï¸</button>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyBqJub5JZstuXNlemSLc9HFziEs11gA70k",
 authDomain:"slot-site-dce13.firebaseapp.com",
 projectId:"slot-site-dce13"
});

const db=firebase.firestore();
const jackpotRef=db.collection("game").doc("jackpot");

const SYMBOLS=["ğŸ’","ğŸ‹","ğŸŠ","ğŸ””","â­","7ï¸âƒ£","ğŸ’"];
const PAYTABLE={"ğŸ’":10,"ğŸ‹":30,"ğŸŠ":50,"ğŸ””":75,"â­":100,"7ï¸âƒ£":150};

const INCOME=50,INTERVAL=60000;
const winLogEl=document.getElementById("winLog");

let playerName=localStorage.getItem("player")||prompt("Spielername:");
localStorage.setItem("player",playerName);

let data={balance:5000,bet:50,lastIncome:Date.now()};
let jackpotValue=5000,spinning=false,winLog=[];

/* Admin */
const MOD_PASSWORD="BsMkTe321";
function openModMenu(){
 if(prompt("Admin Passwort:")==MOD_PASSWORD)
  modMenu.style.display="block";
}

/* Firebase Sync */
jackpotRef.onSnapshot(d=>{
 if(d.exists){jackpotValue=d.data().value;updateUI()}
});

async function loadPlayer(){
 const ref=db.collection("players").doc(playerName);
 const snap=await ref.get();
 if(snap.exists)data={...data,...snap.data()};
 else await ref.set(data);
 updateUI();
}

/* Leaderboard */
db.collection("players").orderBy("balance","desc").limit(10)
.onSnapshot(s=>{
 leaderboardList.innerHTML="";
 let i=1;
 s.forEach(d=>{
  leaderboardList.innerHTML+=
   `<div><span>${i}. ${d.id}</span><span>${d.data().balance} â‚¬</span></div>`;
  i++;
 });
});

/* Income Timer */
setInterval(async()=>{
 const now=Date.now();
 const diff=Math.floor((now-data.lastIncome)/INTERVAL);
 if(diff>0 && data.balance<5000){
  const gain=diff*INCOME;
  data.balance=Math.min(5000,data.balance+gain);
  data.lastIncome+=diff*INTERVAL;
  log(`â³ Einkommen +${gain}â‚¬`,"win");
  await db.collection("players").doc(playerName).set(data,{merge:true});
 }
 timer.innerText=data.balance<5000
 ?`â³ +50â‚¬ in ${Math.ceil((INTERVAL-(now-data.lastIncome))/1000)}s`
 :"âœ… Einkommen voll";
 updateUI();
},1000);

/* Spin */
function randomSym(){return SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)]}

async function spin(){
 if(spinning||data.balance<data.bet)return;
 spinning=true;
 data.balance-=data.bet;
 jackpotValue+=data.bet;
 await jackpotRef.set({value:jackpotValue});

 const f1=randomSym(),f2=randomSym(),f3=randomSym();
 animate(r1,f1,600);animate(r2,f2,800);animate(r3,f3,1000);

 setTimeout(async()=>{
  if(f1===f2&&f2===f3){
   if(f1==="ğŸ’"){
    data.balance+=jackpotValue;
    jackpotValue=5000;
    await jackpotRef.set({value:jackpotValue});
    log(`ğŸ’ JACKPOT GEWONNEN!`,"jackpot");
   }else{
    const win=data.bet*PAYTABLE[f1];
    data.balance+=win;
    log(`ğŸ‰ ${f1}${f2}${f3} +${win}â‚¬`,"win");
   }
  }else log("âŒ Kein Gewinn","lose");

  await db.collection("players").doc(playerName).set(data,{merge:true});
  updateUI();spinning=false;
 },1100);
}

function animate(el,final,dur){
 const start=Date.now();
 const i=setInterval(()=>{
  el.innerText=randomSym();
  if(Date.now()-start>dur){
   clearInterval(i);el.innerText=final;
  }
 },70);
}

/* Utils */
function log(t,type){
 winLog.unshift(`<div class="log-${type}">${t}</div>`);
 winLog=winLog.slice(0,12);
 winLogEl.innerHTML=winLog.join("");
}
function updateUI(){
 status.innerText=`ğŸ‘¤ ${playerName}`;
 jackpot.innerText=`ğŸ’ JACKPOT: ${jackpotValue} â‚¬`;
 playerInfo.innerText=`ğŸ’° ${data.balance} â‚¬ | ğŸ¯ Einsatz ${data.bet} â‚¬`;
}
function setBet(){
 const v=parseInt(prompt("Einsatz:",data.bet));
 if(v>=50&&v<=data.balance)data.bet=v;
}
function allIn(){
 if(data.balance<=0)return alert("âŒ Kein Guthaben");
 data.bet=data.balance;updateUI();
}

async function modSetJackpot(){
 const v=parseInt(modJackpot.value);
 if(!isNaN(v))await jackpotRef.set({value:v});
}
async function modMoney(){
 const ref=db.collection("players").doc(modPlayer.value);
 const d=await ref.get();
 if(d.exists){
  let x=d.data();
  x.balance=Math.max(0,x.balance+parseInt(modAmount.value||0));
  await ref.set(x,{merge:true});
 }
}
async function modResetPlayers(){
 const s=await db.collection("players").get();
 s.forEach(d=>d.ref.delete());
}

loadPlayer();
</script>
</body>
</html>


